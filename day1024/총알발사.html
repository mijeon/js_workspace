<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>총알날리기</title>
    <style>
        #gun{
            position: absolute;
            top: 150px;
            left: 0px;
        }
    </style>
    <script>
        //클래스의 사용목적은 코드의 재사용에 있음.
        //따라서 총일이 다수개가 필요하다면, 클래스로
        //정의해놓고, 해당 클래스의 인스턴스를 다수 생성하자
        class Bullet{  //1 class의 첫 문자는 대문자
            constructor(x, velX){  //2
                this.x=x;  //6-1현재 총알의 좌표를 표현하는 맴버변수
                this.velX=velX;  //6-1

                //js에서는 생성자에 맴버변수를 선언함
                this.img=document.createElement("img");  //프로그램이 끝날 때 까지 살아있음
                this.img.style.width=25+"px";
                this.img.style.height=20+"px";
                this.img.src="../images/총알.png"
                this.img.style.position="absolute";
                this.img.style.left=150+"px";
                this.img.style.top=150+"px";

                //2-1
                document.body.appendChild(this.img);
                this.move();  //6-4

            }
            //6 총알의 움직임을 표현하는 메서드 정의
            move(){
                this.x+=this.velX;  //6-2 등속도
                this.img.style.left=this.x+"px";  //6-3 x의 초기값 변경
                setTimeout(()=>{
                    this.move();
                });
            }
        }  
        //5
        function fire(){
            //거푸집인 클래스로부터 인스턴스를 생성하자
            new Bullet(150, 10);  //6-5 매개변수 값 지정
        }
        //4
        function init(){
            //버튼과 리스너 연결
            document.querySelector("button").addEventListener("click", function(){
                fire();
            });
        }
        //3
        window.addEventListener("load", function(){
            init();
        });
    </script>
</head>
<body>
    <button>총알발사</button>
    <img src="../images/gun.png" width="150px" id="gun">
</body>
</html>